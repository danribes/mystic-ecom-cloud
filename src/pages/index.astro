---
/**
 * Homepage
 *
 * Displays featured courses and recent offerings.
 */

import BaseLayout from '@/layouts/BaseLayout.astro';
import CourseCard from '@/components/CourseCard.astro';
import type { Course } from '@/types';
import { useTranslations } from '@/lib/pageTranslations';

const { t } = useTranslations(Astro.locals);

// For now, use mock data directly (database not configured)
// In production, this would fetch from the API
let error: string | null = null;
let featuredCourses: Course[] = [
  {
    id: 1,
    title: 'Quantum Manifestation Mastery',
      slug: 'quantum-manifestation-mastery',
      description: 'Learn to collapse quantum possibilities into your desired reality through advanced manifestation techniques.',
      longDescription: 'A comprehensive course on quantum manifestation...',
      imageUrl: 'https://images.unsplash.com/photo-1506126613408-eca07ce68773?w=800',
      thumbnailUrl: 'https://images.unsplash.com/photo-1506126613408-eca07ce68773?w=400',
      previewVideoUrl: null,
      price: 19900,
      duration: 14400,
      level: 'intermediate' as const,
      category: 'Manifestation',
      tags: ['manifestation', 'quantum', 'law of attraction'],
      instructorId: 1,
      instructorName: 'Dr. Sarah Quantum',
      instructorAvatar: 'https://i.pravatar.cc/150?img=5',
      enrollmentCount: 1247,
      avgRating: 4.9,
      reviewCount: 423,
      curriculum: [],
      learningOutcomes: [],
      prerequisites: [],
      isPublished: true,
      isFeatured: true,
      publishedAt: new Date().toISOString(),
      createdAt: new Date().toISOString(),
      updatedAt: new Date().toISOString(),
    },
    {
      id: 2,
      title: 'Advanced Energy Healing Certification',
      slug: 'advanced-energy-healing-certification',
      description: 'Master the art of energy healing and become a certified practitioner in multiple modalities.',
      longDescription: 'Complete certification program...',
      imageUrl: 'https://images.unsplash.com/photo-1545389336-cf090694435e?w=800',
      thumbnailUrl: 'https://images.unsplash.com/photo-1545389336-cf090694435e?w=400',
      previewVideoUrl: 'https://example.com/preview.mp4',
      price: 29900,
      duration: 28800,
      level: 'advanced' as const,
      category: 'Energy Healing',
      tags: ['reiki', 'energy healing', 'certification'],
      instructorId: 2,
      instructorName: 'Master Elena Light',
      instructorAvatar: 'https://i.pravatar.cc/150?img=9',
      enrollmentCount: 892,
      avgRating: 4.8,
      reviewCount: 312,
      curriculum: [],
      learningOutcomes: [],
      prerequisites: [],
      isPublished: true,
      isFeatured: true,
      publishedAt: new Date().toISOString(),
      createdAt: new Date().toISOString(),
      updatedAt: new Date().toISOString(),
    },
    {
      id: 3,
      title: 'Chakra Awakening Journey',
      slug: 'chakra-awakening-journey',
      description: 'Unlock and balance all seven chakras for optimal energy flow and spiritual awakening.',
      longDescription: 'Complete chakra system...',
      imageUrl: 'https://images.unsplash.com/photo-1499209974431-9dddcece7f88?w=800',
      thumbnailUrl: 'https://images.unsplash.com/photo-1499209974431-9dddcece7f88?w=400',
      previewVideoUrl: null,
      price: 0,
      duration: 7200,
      level: 'beginner' as const,
      category: 'Chakras',
      tags: ['chakras', 'energy', 'meditation'],
      instructorId: 3,
      instructorName: 'Yogi Ananda',
      instructorAvatar: 'https://i.pravatar.cc/150?img=12',
      enrollmentCount: 3421,
      avgRating: 4.7,
      reviewCount: 1028,
      curriculum: [],
      learningOutcomes: [],
      prerequisites: [],
      isPublished: true,
      isFeatured: true,
      publishedAt: new Date().toISOString(),
      createdAt: new Date().toISOString(),
      updatedAt: new Date().toISOString(),
    },
  ] as Course[];

// Mock data for recent courses
let recentCourses: Course[] = [
  {
    id: 4,
    title: 'Sacred Geometry Fundamentals',
      slug: 'sacred-geometry-fundamentals',
      description: 'Explore the mathematical patterns that underlie all creation and spiritual architecture.',
      longDescription: 'Sacred geometry course...',
      imageUrl: 'https://images.unsplash.com/photo-1557672172-298e090bd0f1?w=800',
      thumbnailUrl: 'https://images.unsplash.com/photo-1557672172-298e090bd0f1?w=400',
      previewVideoUrl: null,
      price: 14900,
      duration: 10800,
      level: 'beginner' as const,
      category: 'Sacred Arts',
      tags: ['sacred geometry', 'mathematics', 'spirituality'],
      instructorId: 4,
      instructorName: 'Prof. Michael Fibonacci',
      instructorAvatar: 'https://i.pravatar.cc/150?img=33',
      enrollmentCount: 687,
      avgRating: 4.6,
      reviewCount: 189,
      curriculum: [],
      learningOutcomes: [],
      prerequisites: [],
      isPublished: true,
      isFeatured: false,
      publishedAt: new Date().toISOString(),
      createdAt: new Date().toISOString(),
      updatedAt: new Date().toISOString(),
    },
    {
      id: 5,
      title: 'Astral Projection Masterclass',
      slug: 'astral-projection-masterclass',
      description: 'Learn safe and effective techniques for out-of-body experiences and astral travel.',
      longDescription: 'Astral projection techniques...',
      imageUrl: 'https://images.unsplash.com/photo-1419242902214-272b3f66ee7a?w=800',
      thumbnailUrl: 'https://images.unsplash.com/photo-1419242902214-272b3f66ee7a?w=400',
      previewVideoUrl: null,
      price: 24900,
      duration: 21600,
      level: 'advanced' as const,
      category: 'Consciousness',
      tags: ['astral projection', 'OBE', 'consciousness'],
      instructorId: 5,
      instructorName: 'Lumina Starwalker',
      instructorAvatar: 'https://i.pravatar.cc/150?img=20',
      enrollmentCount: 512,
      avgRating: 4.9,
      reviewCount: 267,
      curriculum: [],
      learningOutcomes: [],
      prerequisites: [],
      isPublished: true,
      isFeatured: false,
      publishedAt: new Date().toISOString(),
      createdAt: new Date().toISOString(),
      updatedAt: new Date().toISOString(),
    },
    {
      id: 6,
      title: 'Crystal Healing Practitioner',
      slug: 'crystal-healing-practitioner',
      description: 'Comprehensive training in crystal healing properties, layouts, and therapeutic applications.',
      longDescription: 'Crystal healing certification...',
      imageUrl: 'https://images.unsplash.com/photo-1518281361980-b26bfd556770?w=800',
      thumbnailUrl: 'https://images.unsplash.com/photo-1518281361980-b26bfd556770?w=400',
      previewVideoUrl: null,
      price: 17900,
      duration: 18000,
      level: 'intermediate' as const,
      category: 'Crystal Healing',
      tags: ['crystals', 'healing', 'stones'],
      instructorId: 6,
      instructorName: 'Crystal Rose',
      instructorAvatar: 'https://i.pravatar.cc/150?img=45',
      enrollmentCount: 923,
      avgRating: 4.8,
      reviewCount: 412,
      curriculum: [],
      learningOutcomes: [],
      prerequisites: [],
      isPublished: true,
      isFeatured: false,
      publishedAt: new Date().toISOString(),
      createdAt: new Date().toISOString(),
      updatedAt: new Date().toISOString(),
    },
  ] as Course[];
---

<BaseLayout
  title="Quantum Healing Portal - Transform Your Mind, Body & Spirit"
  description="Discover transformative courses in energy healing, manifestation, meditation, and spiritual growth. Join thousands of spiritual seekers on their journey to enlightenment."
  keywords={['spiritual courses', 'energy healing', 'manifestation', 'meditation', 'quantum healing', 'consciousness', 'chakras', 'reiki']}
>
  <!-- Hero Section -->
  <section class="bg-gradient-to-br from-primary to-secondary py-3xl text-center text-white">
    <div class="container">
      <div class="mx-auto max-w-[800px]">
        <h1 class="mb-lg text-4xl font-bold leading-tight">
          {t('home.heroTitle')}<br />
          <span class="bg-gradient-to-r from-amber-300 via-amber-400 to-amber-600 bg-clip-text text-transparent">{t('home.heroSubtitle')}</span>
        </h1>
        <p class="mb-2xl text-xl leading-relaxed opacity-95">
          {t('home.heroDescription')}
        </p>
        <div class="flex flex-wrap justify-center gap-md">
          <a href="/courses" class="rounded-md bg-primary px-xl py-md text-lg font-semibold text-white transition-all duration-fast hover:-translate-y-1 hover:bg-primary-dark hover:shadow-lg">
            {t('home.browseAllCourses')}
          </a>
          <a href="/about" class="rounded-md border-2 border-white bg-transparent px-xl py-md text-lg font-semibold text-white transition-all duration-fast hover:-translate-y-1 hover:bg-white/10 hover:shadow-lg">
            {t('home.learnMore')}
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- Featured Courses Section -->
  {featuredCourses.length > 0 && (
    <section class="py-3xl">
      <div class="container">
        <div class="mb-2xl text-center">
          <h2 class="mb-md text-3xl font-bold text-text">{t('home.featuredCoursesTitle')}</h2>
          <p class="mx-auto max-w-[600px] text-lg text-text-light">
            {t('home.featuredCoursesDescription')}
          </p>
        </div>

        <div class="mb-2xl grid grid-cols-1 gap-xl sm:grid-cols-2 lg:grid-cols-3">
          {featuredCourses.map((course) => (
            <CourseCard course={course} showDescription={true} />
          ))}
        </div>
      </div>
    </section>
  )}

  <!-- Recent Courses Section -->
  {recentCourses.length > 0 && (
    <section class="py-3xl">
      <div class="container">
        <div class="mb-2xl text-center">
          <h2 class="mb-md text-3xl font-bold text-text">{t('home.newArrivalsTitle')}</h2>
          <p class="mx-auto max-w-[600px] text-lg text-text-light">
            {t('home.newArrivalsDescription')}
          </p>
        </div>

        <div class="mb-2xl grid grid-cols-1 gap-xl sm:grid-cols-2 lg:grid-cols-3">
          {recentCourses.map((course) => (
            <CourseCard course={course} />
          ))}
        </div>

        <div class="text-center">
          <a href="/courses" class="inline-block rounded-md bg-primary px-xl py-md font-semibold text-white transition-all duration-fast hover:-translate-y-1 hover:bg-primary-dark hover:shadow-lg">
            {t('home.viewAllCourses')}
          </a>
        </div>
      </div>
    </section>
  )}

  <!-- CTA Section -->
  <section class="bg-gradient-to-br from-primary/10 to-secondary/10 py-3xl text-center">
    <div class="container">
      <div class="mx-auto max-w-[700px]">
        <h2 class="mb-md text-3xl font-bold text-text">{t('home.ctaTitle')}</h2>
        <p class="mb-xl text-lg text-text-light">
          {t('home.ctaDescription')}
        </p>
        <a href="/courses" class="inline-block rounded-md bg-secondary px-xl py-md text-lg font-semibold text-white transition-all duration-fast hover:-translate-y-1 hover:bg-secondary-dark hover:shadow-lg">
          {t('home.startLearningToday')}
        </a>
      </div>
    </div>
  </section>
</BaseLayout>

